package com.eme.ims.codec;import org.apache.mina.core.buffer.IoBuffer;import org.apache.mina.core.session.IoSession;import org.apache.mina.filter.codec.ProtocolEncoder;import org.apache.mina.filter.codec.ProtocolEncoderOutput;import com.eme.ims.utils.PropertyConfig;public class MessageEncoder implements ProtocolEncoder{		private MessageManager messageManager = MessageManager.INSTANCE;			private PropertyConfig config;		public MessageEncoder(PropertyConfig config) {		this.config = config;	}		@Override	public void encode(IoSession session, Object message,			ProtocolEncoderOutput out) throws Exception {				System.out.println("start to encode....");		if (message instanceof Message) {			Message msg  = (Message) message;			IoBuffer buffer = messageManager.getStreamBuffer(msg, config);			buffer.flip();			out.write(buffer);		} else {			System.out.println("unexcepcted object...");		}	}	@Override	public void dispose(IoSession session) throws Exception {		//TODO dispose	}}